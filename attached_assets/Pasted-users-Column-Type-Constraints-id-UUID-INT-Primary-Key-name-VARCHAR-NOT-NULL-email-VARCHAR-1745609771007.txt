users
Column
Type
Constraints
id
UUID/INT
Primary Key
name
VARCHAR
NOT NULL
email
VARCHAR
UNIQUE, NOT NULL
phone
VARCHAR


password_hash
TEXT
NOT NULL
address
TEXT


role
ENUM
('client', 'manager', 'admin')
can_give_discount
BOOLEAN
DEFAULT FALSE
created_at
TIMESTAMP
DEFAULT CURRENT_TIMESTAMP


services
Column
Type
Constraints
id
UUID/INT
Primary Key
name
VARCHAR
NOT NULL
description
TEXT


price
DECIMAL
NOT NULL


packages
Column
Type
Constraints
id
UUID/INT
Primary Key
name
VARCHAR
NOT NULL
image_url
TEXT


description
TEXT


price
DECIMAL


customized
BOOLEAN
DEFAULT FALSE
created_by
UUID/INT
FK → users(id)
created_at
TIMESTAMP
DEFAULT CURRENT_TIMESTAMP


package_services
Column
Type
Constraints
package_id
UUID/INT
FK → packages(id)
service_id
UUID/INT
FK → services(id)
PRIMARY KEY
(package_id, service_id)




bookings
Column
Type
Constraints
id
UUID/INT
Primary Key
user_id
UUID/INT
FK → users(id)
package_id
UUID/INT
FK → packages(id)
event_place
TEXT
NOT NULL
event_date
DATE
NOT NULL
discount
DECIMAL


confirmed_by
UUID/INT
FK → users(id), NULLABLE
status
ENUM
('pending', 'confirmed')
created_at
TIMESTAMP
DEFAULT CURRENT_TIMESTAMP


guests
Column
Type
Constraints
id
UUID/INT
Primary Key
booking_id
UUID/INT
FK → bookings(id)
name
VARCHAR


email
VARCHAR


phone
VARCHAR


rsvp_status
ENUM
('pending', 'yes', 'no')


event_attendance ✅
Column
Type
Constraints
id
UUID/INT
Primary Key
guest_id
UUID/INT
FK → guests(id)
booking_id




attended
BOOLEAN
DEFAULT FALSE
checked_in_at
TIMESTAMP
NULLABLE
remarks
TEXT
Optional notes if needed
















SQL
-- ===================== USERS =====================
CREATE TABLE users (
   id SERIAL PRIMARY KEY,
   name VARCHAR(100) NOT NULL,
   email VARCHAR(150) UNIQUE NOT NULL,
   phone VARCHAR(20),
   password_hash TEXT NOT NULL,
   address TEXT,
   role VARCHAR(20) CHECK (role IN ('client', 'manager', 'admin')) NOT NULL,
   can_give_discount BOOLEAN DEFAULT FALSE,
   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);


-- ===================== SERVICES =====================
CREATE TABLE services (
   id SERIAL PRIMARY KEY,
   name VARCHAR(100) NOT NULL,
   description TEXT,
   price DECIMAL(10, 2) NOT NULL
);


-- ===================== PACKAGES =====================
CREATE TABLE packages (
   id SERIAL PRIMARY KEY,
   name VARCHAR(150) NOT NULL,
   image_url TEXT,
   description TEXT,
   price DECIMAL(10, 2),
   customized BOOLEAN DEFAULT FALSE,
   created_by INTEGER REFERENCES users(id),
   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);


-- ===================== PACKAGE_SERVICES =====================
CREATE TABLE package_services (
   package_id INTEGER REFERENCES packages(id) ON DELETE CASCADE,
   service_id INTEGER REFERENCES services(id) ON DELETE CASCADE,
   PRIMARY KEY (package_id, service_id)
);


-- ===================== BOOKINGS =====================
CREATE TABLE bookings (
   id SERIAL PRIMARY KEY,
   user_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
   package_id INTEGER REFERENCES packages(id),
   event_place TEXT NOT NULL,
   event_date DATE NOT NULL,
   discount DECIMAL(10, 2),
   confirmed_by INTEGER REFERENCES users(id),
   status VARCHAR(20) CHECK (status IN ('pending', 'confirmed')) DEFAULT 'pending',
   created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);


-- ===================== GUESTS =====================
CREATE TABLE guests (
   id SERIAL PRIMARY KEY,
   booking_id INTEGER REFERENCES bookings(id) ON DELETE CASCADE,
   name VARCHAR(100),
   email VARCHAR(150),
   phone VARCHAR(20),
   rsvp_status VARCHAR(10) CHECK (rsvp_status IN ('pending', 'yes', 'no')) DEFAULT 'pending'
);


-- ===================== EVENT ATTENDANCE =====================
CREATE TABLE event_attendance (
   id SERIAL PRIMARY KEY,
   guest_id INTEGER REFERENCES guests(id) ON DELETE CASCADE,
   attended BOOLEAN DEFAULT FALSE,
   checked_in_at TIMESTAMP,
   remarks TEXT
);


